
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>modelparameters.sympy.matrices.densearith &#8212; modelparameters 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/nature.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">modelparameters 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">modelparameters.sympy.matrices.densearith</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for modelparameters.sympy.matrices.densearith</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Fundamental arithmetic of dense matrices. The dense matrix is stored</span>
<span class="sd">as a list of lists.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">..core.compatibility</span> <span class="kn">import</span> <span class="nb">range</span>

<span class="kn">from</span> <span class="nn">..utilities.exceptions</span> <span class="kn">import</span> <span class="n">SymPyDeprecationWarning</span>

<span class="n">SymPyDeprecationWarning</span><span class="p">(</span>
    <span class="n">feature</span><span class="o">=</span><span class="s2">&quot;densearith&quot;</span><span class="p">,</span>
    <span class="n">issue</span><span class="o">=</span><span class="mi">12695</span><span class="p">,</span>
    <span class="n">deprecated_since_version</span><span class="o">=</span><span class="s2">&quot;1.1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">warn</span><span class="p">()</span>

<div class="viewcode-block" id="add"><a class="viewcode-back" href="../../../../modelparameters.sympy.matrices.html#modelparameters.sympy.matrices.densearith.add">[docs]</a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">matlist1</span><span class="p">,</span> <span class="n">matlist2</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds matrices row-wise.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .densearith import add</span>
<span class="sd">    &gt;&gt;&gt; from .. import ZZ</span>
<span class="sd">    &gt;&gt;&gt; e = [</span>
<span class="sd">    ... [ZZ(12), ZZ(78)],</span>
<span class="sd">    ... [ZZ(56), ZZ(79)]]</span>
<span class="sd">    &gt;&gt;&gt; f = [</span>
<span class="sd">    ... [ZZ(1), ZZ(2)],</span>
<span class="sd">    ... [ZZ(3), ZZ(4)]]</span>
<span class="sd">    &gt;&gt;&gt; g = [</span>
<span class="sd">    ... [ZZ.zero, ZZ.zero],</span>
<span class="sd">    ... [ZZ.zero, ZZ.zero]]</span>
<span class="sd">    &gt;&gt;&gt; add(e, f, ZZ)</span>
<span class="sd">    [[13, 80], [59, 83]]</span>
<span class="sd">    &gt;&gt;&gt; add(f, g, ZZ)</span>
<span class="sd">    [[1, 2], [3, 4]]</span>

<span class="sd">    See Also</span>
<span class="sd">    ========</span>

<span class="sd">    addrow</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">addrow</span><span class="p">(</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">,</span> <span class="n">K</span><span class="p">)</span> <span class="k">for</span> <span class="n">row1</span><span class="p">,</span> <span class="n">row2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">matlist1</span><span class="p">,</span> <span class="n">matlist2</span><span class="p">)]</span></div>

<div class="viewcode-block" id="addrow"><a class="viewcode-back" href="../../../../modelparameters.sympy.matrices.html#modelparameters.sympy.matrices.densearith.addrow">[docs]</a><span class="k">def</span> <span class="nf">addrow</span><span class="p">(</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds two rows of a matrix element-wise.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .densearith import addrow</span>
<span class="sd">    &gt;&gt;&gt; from .. import ZZ</span>

<span class="sd">    &gt;&gt;&gt; a = [ZZ(12), ZZ(34), ZZ(56)]</span>
<span class="sd">    &gt;&gt;&gt; b = [ZZ(14), ZZ(56), ZZ(63)]</span>
<span class="sd">    &gt;&gt;&gt; c = [ZZ(0), ZZ(0), ZZ(0)]</span>

<span class="sd">    &gt;&gt;&gt; addrow(a, b, ZZ)</span>
<span class="sd">    [26, 90, 119]</span>
<span class="sd">    &gt;&gt;&gt; addrow(b, c, ZZ)</span>
<span class="sd">    [14, 56, 63]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">element1</span> <span class="o">+</span> <span class="n">element2</span> <span class="k">for</span> <span class="n">element1</span><span class="p">,</span> <span class="n">element2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">)]</span></div>


<div class="viewcode-block" id="sub"><a class="viewcode-back" href="../../../../modelparameters.sympy.matrices.html#modelparameters.sympy.matrices.densearith.sub">[docs]</a><span class="k">def</span> <span class="nf">sub</span><span class="p">(</span><span class="n">matlist1</span><span class="p">,</span> <span class="n">matlist2</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Subtracts two matrices by first negating the second matrix and</span>
<span class="sd">    then adding it to first matrix.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .densearith import sub</span>
<span class="sd">    &gt;&gt;&gt; from .. import ZZ</span>
<span class="sd">    &gt;&gt;&gt; e = [</span>
<span class="sd">    ... [ZZ(12), ZZ(78)],</span>
<span class="sd">    ... [ZZ(56), ZZ(79)]]</span>
<span class="sd">    &gt;&gt;&gt; f = [</span>
<span class="sd">    ... [ZZ(1), ZZ(2)],</span>
<span class="sd">    ... [ZZ(3), ZZ(4)]]</span>
<span class="sd">    &gt;&gt;&gt; g = [</span>
<span class="sd">    ... [ZZ.zero, ZZ.zero],</span>
<span class="sd">    ... [ZZ.zero, ZZ.zero]]</span>
<span class="sd">    &gt;&gt;&gt; sub(e, f, ZZ)</span>
<span class="sd">    [[11, 76], [53, 75]]</span>
<span class="sd">    &gt;&gt;&gt; sub(f, g, ZZ)</span>
<span class="sd">    [[1, 2], [3, 4]]</span>

<span class="sd">    See Also</span>
<span class="sd">    ========</span>

<span class="sd">    negate</span>
<span class="sd">    negaterow</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">add</span><span class="p">(</span><span class="n">matlist1</span><span class="p">,</span> <span class="n">negate</span><span class="p">(</span><span class="n">matlist2</span><span class="p">,</span> <span class="n">K</span><span class="p">),</span> <span class="n">K</span><span class="p">)</span></div>


<div class="viewcode-block" id="negate"><a class="viewcode-back" href="../../../../modelparameters.sympy.matrices.html#modelparameters.sympy.matrices.densearith.negate">[docs]</a><span class="k">def</span> <span class="nf">negate</span><span class="p">(</span><span class="n">matlist</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Negates the elements of a matrix row-wise.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .densearith import negate</span>
<span class="sd">    &gt;&gt;&gt; from .. import ZZ</span>
<span class="sd">    &gt;&gt;&gt; a = [</span>
<span class="sd">    ... [ZZ(2), ZZ(3)],</span>
<span class="sd">    ... [ZZ(4), ZZ(5)]]</span>
<span class="sd">    &gt;&gt;&gt; b = [</span>
<span class="sd">    ... [ZZ(0), ZZ(0)],</span>
<span class="sd">    ... [ZZ(0), ZZ(0)]]</span>
<span class="sd">    &gt;&gt;&gt; negate(a, ZZ)</span>
<span class="sd">    [[-2, -3], [-4, -5]]</span>
<span class="sd">    &gt;&gt;&gt; negate(b, ZZ)</span>
<span class="sd">    [[0, 0], [0, 0]]</span>

<span class="sd">    See Also</span>
<span class="sd">    ========</span>

<span class="sd">    negaterow</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">negaterow</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">K</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matlist</span><span class="p">]</span></div>


<div class="viewcode-block" id="negaterow"><a class="viewcode-back" href="../../../../modelparameters.sympy.matrices.html#modelparameters.sympy.matrices.densearith.negaterow">[docs]</a><span class="k">def</span> <span class="nf">negaterow</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Negates a row element-wise.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .densearith import negaterow</span>
<span class="sd">    &gt;&gt;&gt; from .. import ZZ</span>
<span class="sd">    &gt;&gt;&gt; a = [ZZ(2), ZZ(3), ZZ(4)]</span>
<span class="sd">    &gt;&gt;&gt; b = [ZZ(0), ZZ(0), ZZ(0)]</span>
<span class="sd">    &gt;&gt;&gt; negaterow(a, ZZ)</span>
<span class="sd">    [-2, -3, -4]</span>
<span class="sd">    &gt;&gt;&gt; negaterow(b, ZZ)</span>
<span class="sd">    [0, 0, 0]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="o">-</span><span class="n">element</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span></div>


<div class="viewcode-block" id="mulmatmat"><a class="viewcode-back" href="../../../../modelparameters.sympy.matrices.html#modelparameters.sympy.matrices.densearith.mulmatmat">[docs]</a><span class="k">def</span> <span class="nf">mulmatmat</span><span class="p">(</span><span class="n">matlist1</span><span class="p">,</span> <span class="n">matlist2</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Multiplies two matrices by multiplying each row with each column at</span>
<span class="sd">    a time. The multiplication of row and column is done with mulrowcol.</span>

<span class="sd">    Firstly, the second matrix is converted from a list of rows to a</span>
<span class="sd">    list of columns using zip and then multiplication is done.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .densearith import mulmatmat</span>
<span class="sd">    &gt;&gt;&gt; from .. import ZZ</span>
<span class="sd">    &gt;&gt;&gt; from .densetools import eye</span>
<span class="sd">    &gt;&gt;&gt; a = [</span>
<span class="sd">    ... [ZZ(3), ZZ(4)],</span>
<span class="sd">    ... [ZZ(5), ZZ(6)]]</span>
<span class="sd">    &gt;&gt;&gt; b = [</span>
<span class="sd">    ... [ZZ(1), ZZ(2)],</span>
<span class="sd">    ... [ZZ(7), ZZ(8)]]</span>
<span class="sd">    &gt;&gt;&gt; c = eye(2, ZZ)</span>
<span class="sd">    &gt;&gt;&gt; mulmatmat(a, b, ZZ)</span>
<span class="sd">    [[31, 38], [47, 58]]</span>
<span class="sd">    &gt;&gt;&gt; mulmatmat(a, c, ZZ)</span>
<span class="sd">    [[3, 4], [5, 6]]</span>

<span class="sd">    See Also</span>
<span class="sd">    ========</span>

<span class="sd">    mulrowcol</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">matcol</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">matlist2</span><span class="p">)]</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matlist1</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">mulrowcol</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">K</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">matcol</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="mulmatscaler"><a class="viewcode-back" href="../../../../modelparameters.sympy.matrices.html#modelparameters.sympy.matrices.densearith.mulmatscaler">[docs]</a><span class="k">def</span> <span class="nf">mulmatscaler</span><span class="p">(</span><span class="n">matlist</span><span class="p">,</span> <span class="n">scaler</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs scaler matrix multiplication one row at at time. The row-scaler</span>
<span class="sd">    multiplication is done using mulrowscaler.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .. import ZZ</span>
<span class="sd">    &gt;&gt;&gt; from .densearith import mulmatscaler</span>
<span class="sd">    &gt;&gt;&gt; a = [</span>
<span class="sd">    ... [ZZ(3), ZZ(7), ZZ(4)],</span>
<span class="sd">    ... [ZZ(2), ZZ(4), ZZ(5)],</span>
<span class="sd">    ... [ZZ(6), ZZ(2), ZZ(3)]]</span>
<span class="sd">    &gt;&gt;&gt; mulmatscaler(a, ZZ(1), ZZ)</span>
<span class="sd">    [[3, 7, 4], [2, 4, 5], [6, 2, 3]]</span>

<span class="sd">    See Also</span>
<span class="sd">    ========</span>

<span class="sd">    mulscalerrow</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">mulrowscaler</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">scaler</span><span class="p">,</span> <span class="n">K</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matlist</span><span class="p">]</span></div>


<div class="viewcode-block" id="mulrowscaler"><a class="viewcode-back" href="../../../../modelparameters.sympy.matrices.html#modelparameters.sympy.matrices.densearith.mulrowscaler">[docs]</a><span class="k">def</span> <span class="nf">mulrowscaler</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">scaler</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs the scaler-row multiplication element-wise.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .. import ZZ</span>
<span class="sd">    &gt;&gt;&gt; from .densearith import mulrowscaler</span>
<span class="sd">    &gt;&gt;&gt; a = [ZZ(3), ZZ(4), ZZ(5)]</span>
<span class="sd">    &gt;&gt;&gt; mulrowscaler(a, 2, ZZ)</span>
<span class="sd">    [6, 8, 10]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">scaler</span><span class="o">*</span><span class="n">element</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span></div>


<div class="viewcode-block" id="mulrowcol"><a class="viewcode-back" href="../../../../modelparameters.sympy.matrices.html#modelparameters.sympy.matrices.densearith.mulrowcol">[docs]</a><span class="k">def</span> <span class="nf">mulrowcol</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Multiplies two lists representing row and column element-wise.</span>

<span class="sd">    Gotcha: Here the column is represented as a list contrary to the norm</span>
<span class="sd">    where it is represented as a list of one element lists. The reason is</span>
<span class="sd">    that the theoretically correct approach is too expensive. This problem</span>
<span class="sd">    is expected to be removed later as we have a good data structure to</span>
<span class="sd">    facilitate column operations.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .densearith import mulrowcol</span>
<span class="sd">    &gt;&gt;&gt; from .. import ZZ</span>

<span class="sd">    &gt;&gt;&gt; a = [ZZ(2), ZZ(4), ZZ(6)]</span>
<span class="sd">    &gt;&gt;&gt; mulrowcol(a, a, ZZ)</span>
<span class="sd">    56</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">K</span><span class="o">.</span><span class="n">zero</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)):</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">row</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">col</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">result</span></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">modelparameters 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">modelparameters.sympy.matrices.densearith</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Johan Hake, Henrik Finsberg.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>