
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>modelparameters.sympy.calculus.util &#8212; modelparameters 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/nature.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">modelparameters 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">modelparameters.sympy.calculus.util</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for modelparameters.sympy.calculus.util</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">Order</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">lcm_list</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">Abs</span>
<span class="kn">from</span> <span class="nn">..core.basic</span> <span class="kn">import</span> <span class="n">Basic</span>
<span class="kn">from</span> <span class="nn">..core</span> <span class="kn">import</span> <span class="n">Add</span><span class="p">,</span> <span class="n">Mul</span><span class="p">,</span> <span class="n">Pow</span>
<span class="kn">from</span> <span class="nn">..logic.boolalg</span> <span class="kn">import</span> <span class="n">And</span>
<span class="kn">from</span> <span class="nn">..core.expr</span> <span class="kn">import</span> <span class="n">AtomicExpr</span><span class="p">,</span> <span class="n">Expr</span>
<span class="kn">from</span> <span class="nn">..core.numbers</span> <span class="kn">import</span> <span class="n">_sympifyit</span><span class="p">,</span> <span class="n">oo</span>
<span class="kn">from</span> <span class="nn">..core.sympify</span> <span class="kn">import</span> <span class="n">_sympify</span>
<span class="kn">from</span> <span class="nn">..sets.sets</span> <span class="kn">import</span> <span class="p">(</span><span class="n">Interval</span><span class="p">,</span> <span class="n">Intersection</span><span class="p">,</span> <span class="n">FiniteSet</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span>
                             <span class="n">Complement</span><span class="p">,</span> <span class="n">EmptySet</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">..functions.elementary.miscellaneous</span> <span class="kn">import</span> <span class="n">Min</span><span class="p">,</span> <span class="n">Max</span>
<span class="kn">from</span> <span class="nn">..utilities</span> <span class="kn">import</span> <span class="n">filldedent</span>


<div class="viewcode-block" id="continuous_domain"><a class="viewcode-back" href="../../../../modelparameters.sympy.calculus.html#modelparameters.sympy.calculus.util.continuous_domain">[docs]</a><span class="k">def</span> <span class="nf">continuous_domain</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the intervals in the given domain for which the function</span>
<span class="sd">    is continuous.</span>
<span class="sd">    This method is limited by the ability to determine the various</span>
<span class="sd">    singularities and discontinuities of the given function.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .. import Symbol, S, tan, log, pi, sqrt</span>
<span class="sd">    &gt;&gt;&gt; from ..sets import Interval</span>
<span class="sd">    &gt;&gt;&gt; from .util import continuous_domain</span>
<span class="sd">    &gt;&gt;&gt; x = Symbol(&#39;x&#39;)</span>
<span class="sd">    &gt;&gt;&gt; continuous_domain(1/x, x, S.Reals)</span>
<span class="sd">    Union(Interval.open(-oo, 0), Interval.open(0, oo))</span>
<span class="sd">    &gt;&gt;&gt; continuous_domain(tan(x), x, Interval(0, pi))</span>
<span class="sd">    Union(Interval.Ropen(0, pi/2), Interval.Lopen(pi/2, pi))</span>
<span class="sd">    &gt;&gt;&gt; continuous_domain(sqrt(x - 2), x, Interval(-5, 5))</span>
<span class="sd">    Interval(2, 5)</span>
<span class="sd">    &gt;&gt;&gt; continuous_domain(log(2*x - 1), x, S.Reals)</span>
<span class="sd">    Interval.open(1/2, oo)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">..solvers.inequalities</span> <span class="kn">import</span> <span class="n">solve_univariate_inequality</span>
    <span class="kn">from</span> <span class="nn">..solvers.solveset</span> <span class="kn">import</span> <span class="n">solveset</span><span class="p">,</span> <span class="n">_has_rational_power</span>

    <span class="k">if</span> <span class="n">domain</span><span class="o">.</span><span class="n">is_subset</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">Reals</span><span class="p">):</span>
        <span class="n">constrained_interval</span> <span class="o">=</span> <span class="n">domain</span>
        <span class="k">for</span> <span class="n">atom</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">atoms</span><span class="p">(</span><span class="n">Pow</span><span class="p">):</span>
            <span class="n">predicate</span><span class="p">,</span> <span class="n">denom</span> <span class="o">=</span> <span class="n">_has_rational_power</span><span class="p">(</span><span class="n">atom</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>
            <span class="n">constraint</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span>
            <span class="k">if</span> <span class="n">predicate</span> <span class="ow">and</span> <span class="n">denom</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">constraint</span> <span class="o">=</span> <span class="n">solve_univariate_inequality</span><span class="p">(</span><span class="n">atom</span><span class="o">.</span><span class="n">base</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span>
                                                         <span class="n">symbol</span><span class="p">)</span><span class="o">.</span><span class="n">as_set</span><span class="p">()</span>
                <span class="n">constrained_interval</span> <span class="o">=</span> <span class="n">Intersection</span><span class="p">(</span><span class="n">constraint</span><span class="p">,</span>
                                                    <span class="n">constrained_interval</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">atom</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">atoms</span><span class="p">(</span><span class="n">log</span><span class="p">):</span>
            <span class="n">constraint</span> <span class="o">=</span> <span class="n">solve_univariate_inequality</span><span class="p">(</span><span class="n">atom</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
                                                     <span class="n">symbol</span><span class="p">)</span><span class="o">.</span><span class="n">as_set</span><span class="p">()</span>
            <span class="n">constrained_interval</span> <span class="o">=</span> <span class="n">Intersection</span><span class="p">(</span><span class="n">constraint</span><span class="p">,</span>
                                                <span class="n">constrained_interval</span><span class="p">)</span>

        <span class="n">domain</span> <span class="o">=</span> <span class="n">constrained_interval</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">sings</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">Abs</span><span class="p">):</span>
            <span class="n">sings</span> <span class="o">=</span> <span class="n">solveset</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">domain</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">atom</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">atoms</span><span class="p">(</span><span class="n">Pow</span><span class="p">):</span>
                <span class="n">predicate</span><span class="p">,</span> <span class="n">denom</span> <span class="o">=</span> <span class="n">_has_rational_power</span><span class="p">(</span><span class="n">atom</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">predicate</span> <span class="ow">and</span> <span class="n">denom</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">sings</span> <span class="o">=</span> <span class="n">solveset</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">domain</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sings</span> <span class="o">=</span> <span class="n">Intersection</span><span class="p">(</span><span class="n">solveset</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">),</span> <span class="n">domain</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;Methods for determining the continuous domains&quot;</span>
            <span class="s2">&quot; of this function have not been developed.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">domain</span> <span class="o">-</span> <span class="n">sings</span></div>


<div class="viewcode-block" id="function_range"><a class="viewcode-back" href="../../../../modelparameters.sympy.calculus.html#modelparameters.sympy.calculus.util.function_range">[docs]</a><span class="k">def</span> <span class="nf">function_range</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finds the range of a function in a given domain.</span>
<span class="sd">    This method is limited by the ability to determine the singularities and</span>
<span class="sd">    determine limits.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .. import Symbol, S, exp, log, pi, sqrt, sin, tan</span>
<span class="sd">    &gt;&gt;&gt; from ..sets import Interval</span>
<span class="sd">    &gt;&gt;&gt; from .util import function_range</span>
<span class="sd">    &gt;&gt;&gt; x = Symbol(&#39;x&#39;)</span>
<span class="sd">    &gt;&gt;&gt; function_range(sin(x), x, Interval(0, 2*pi))</span>
<span class="sd">    Interval(-1, 1)</span>
<span class="sd">    &gt;&gt;&gt; function_range(tan(x), x, Interval(-pi/2, pi/2))</span>
<span class="sd">    Interval(-oo, oo)</span>
<span class="sd">    &gt;&gt;&gt; function_range(1/x, x, S.Reals)</span>
<span class="sd">    Interval(-oo, oo)</span>
<span class="sd">    &gt;&gt;&gt; function_range(exp(x), x, S.Reals)</span>
<span class="sd">    Interval.open(0, oo)</span>
<span class="sd">    &gt;&gt;&gt; function_range(log(x), x, S.Reals)</span>
<span class="sd">    Interval(-oo, oo)</span>
<span class="sd">    &gt;&gt;&gt; function_range(sqrt(x), x , Interval(-5, 9))</span>
<span class="sd">    Interval(0, 3)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">..solvers.solveset</span> <span class="kn">import</span> <span class="n">solveset</span>

    <span class="n">vals</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span>
    <span class="n">period</span> <span class="o">=</span> <span class="n">periodicity</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">period</span> <span class="ow">is</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span><span class="p">)):</span>
        <span class="n">inf</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">inf</span>
        <span class="n">inf_period</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span> <span class="k">if</span> <span class="n">inf</span><span class="o">.</span><span class="n">is_infinite</span> <span class="k">else</span> <span class="n">inf</span>
        <span class="n">sup_period</span> <span class="o">=</span> <span class="n">inf_period</span> <span class="o">+</span> <span class="n">period</span>
        <span class="n">periodic_interval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="n">inf_period</span><span class="p">,</span> <span class="n">sup_period</span><span class="p">)</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">periodic_interval</span><span class="p">)</span>

    <span class="n">intervals</span> <span class="o">=</span> <span class="n">continuous_domain</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">domain</span><span class="p">)</span>
    <span class="n">range_int</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">intervals</span><span class="p">,</span> <span class="n">Interval</span><span class="p">):</span>
        <span class="n">interval_iter</span> <span class="o">=</span> <span class="p">(</span><span class="n">intervals</span><span class="p">,)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">interval_iter</span> <span class="o">=</span> <span class="n">intervals</span><span class="o">.</span><span class="n">args</span>

    <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">interval_iter</span><span class="p">:</span>
        <span class="n">critical_points</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span>
        <span class="n">critical_values</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">((</span><span class="n">interval</span><span class="o">.</span><span class="n">left_open</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">right_open</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">sup</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">is_open</span><span class="p">,</span> <span class="n">limit_point</span><span class="p">,</span> <span class="n">direction</span> <span class="ow">in</span> <span class="n">bounds</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_open</span><span class="p">:</span>
                <span class="n">critical_values</span> <span class="o">+=</span> <span class="n">FiniteSet</span><span class="p">(</span><span class="n">limit</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">limit_point</span><span class="p">,</span> <span class="n">direction</span><span class="p">))</span>
                <span class="n">vals</span> <span class="o">+=</span> <span class="n">critical_values</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">vals</span> <span class="o">+=</span> <span class="n">FiniteSet</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">limit_point</span><span class="p">))</span>

        <span class="n">critical_points</span> <span class="o">+=</span> <span class="n">solveset</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">symbol</span><span class="p">),</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">domain</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">critical_point</span> <span class="ow">in</span> <span class="n">critical_points</span><span class="p">:</span>
            <span class="n">vals</span> <span class="o">+=</span> <span class="n">FiniteSet</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">critical_point</span><span class="p">))</span>

        <span class="n">left_open</span><span class="p">,</span> <span class="n">right_open</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">critical_values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">critical_values</span><span class="o">.</span><span class="n">inf</span> <span class="o">==</span> <span class="n">vals</span><span class="o">.</span><span class="n">inf</span><span class="p">:</span>
                <span class="n">left_open</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="n">critical_values</span><span class="o">.</span><span class="n">sup</span> <span class="o">==</span> <span class="n">vals</span><span class="o">.</span><span class="n">sup</span><span class="p">:</span>
                <span class="n">right_open</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">range_int</span> <span class="o">+=</span> <span class="n">Interval</span><span class="p">(</span><span class="n">vals</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">vals</span><span class="o">.</span><span class="n">sup</span><span class="p">,</span> <span class="n">left_open</span><span class="p">,</span> <span class="n">right_open</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">range_int</span></div>


<div class="viewcode-block" id="not_empty_in"><a class="viewcode-back" href="../../../../modelparameters.sympy.calculus.html#modelparameters.sympy.calculus.util.not_empty_in">[docs]</a><span class="k">def</span> <span class="nf">not_empty_in</span><span class="p">(</span><span class="n">finset_intersection</span><span class="p">,</span> <span class="o">*</span><span class="n">syms</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Finds the domain of the functions in `finite_set` in which the</span>
<span class="sd">    `finite_set` is not-empty</span>

<span class="sd">    Parameters</span>
<span class="sd">    ==========</span>

<span class="sd">    finset_intersection: The unevaluated intersection of FiniteSet containing</span>
<span class="sd">                        real-valued functions with Union of Sets</span>
<span class="sd">    syms: Tuple of symbols</span>
<span class="sd">            Symbol for which domain is to be found</span>

<span class="sd">    Raises</span>
<span class="sd">    ======</span>

<span class="sd">    NotImplementedError</span>
<span class="sd">        The algorithms to find the non-emptiness of the given FiniteSet are</span>
<span class="sd">        not yet implemented.</span>
<span class="sd">    ValueError</span>
<span class="sd">        The input is not valid.</span>
<span class="sd">    RuntimeError</span>
<span class="sd">        It is a bug, please report it to the github issue tracker</span>
<span class="sd">        (https://github.com/sympy/sympy/issues).</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .. import FiniteSet, Interval, not_empty_in, oo</span>
<span class="sd">    &gt;&gt;&gt; from ..abc import x</span>
<span class="sd">    &gt;&gt;&gt; not_empty_in(FiniteSet(x/2).intersect(Interval(0, 1)), x)</span>
<span class="sd">    Interval(0, 2)</span>
<span class="sd">    &gt;&gt;&gt; not_empty_in(FiniteSet(x, x**2).intersect(Interval(1, 2)), x)</span>
<span class="sd">    Union(Interval(-sqrt(2), -1), Interval(1, 2))</span>
<span class="sd">    &gt;&gt;&gt; not_empty_in(FiniteSet(x**2/(x + 2)).intersect(Interval(1, oo)), x)</span>
<span class="sd">    Union(Interval.Lopen(-2, -1), Interval(2, oo))</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># TODO: handle piecewise defined functions</span>
    <span class="c1"># TODO: handle transcendental functions</span>
    <span class="c1"># TODO: handle multivariate functions</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">syms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;One or more symbols must be given in syms.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">finset_intersection</span><span class="o">.</span><span class="n">is_EmptySet</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">EmptySet</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">finset_intersection</span><span class="p">,</span> <span class="n">Union</span><span class="p">):</span>
        <span class="n">elm_in_sets</span> <span class="o">=</span> <span class="n">finset_intersection</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Union</span><span class="p">(</span><span class="n">not_empty_in</span><span class="p">(</span><span class="n">finset_intersection</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">*</span><span class="n">syms</span><span class="p">),</span>
                     <span class="n">elm_in_sets</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">finset_intersection</span><span class="p">,</span> <span class="n">FiniteSet</span><span class="p">):</span>
        <span class="n">finite_set</span> <span class="o">=</span> <span class="n">finset_intersection</span>
        <span class="n">_sets</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">Reals</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">finite_set</span> <span class="o">=</span> <span class="n">finset_intersection</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">_sets</span> <span class="o">=</span> <span class="n">finset_intersection</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">finite_set</span><span class="p">,</span> <span class="n">FiniteSet</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;A FiniteSet must be given, not </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                         <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">finite_set</span><span class="p">),</span> <span class="n">finite_set</span><span class="p">))</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">syms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">symb</span> <span class="o">=</span> <span class="n">syms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;more than one variables </span><span class="si">%s</span><span class="s1"> not handled&#39;</span> <span class="o">%</span>
                                  <span class="p">(</span><span class="n">syms</span><span class="p">,))</span>

    <span class="k">def</span> <span class="nf">elm_domain</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">intrvl</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Finds the domain of an expression in any given interval &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">..solvers.solveset</span> <span class="kn">import</span> <span class="n">solveset</span>

        <span class="n">_start</span> <span class="o">=</span> <span class="n">intrvl</span><span class="o">.</span><span class="n">start</span>
        <span class="n">_end</span> <span class="o">=</span> <span class="n">intrvl</span><span class="o">.</span><span class="n">end</span>
        <span class="n">_singularities</span> <span class="o">=</span> <span class="n">solveset</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">as_numer_denom</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="n">symb</span><span class="p">,</span>
                                  <span class="n">domain</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">Reals</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">intrvl</span><span class="o">.</span><span class="n">right_open</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">_end</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span><span class="p">:</span>
                <span class="n">_domain1</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">Reals</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_domain1</span> <span class="o">=</span> <span class="n">solveset</span><span class="p">(</span><span class="n">expr</span> <span class="o">&lt;</span> <span class="n">_end</span><span class="p">,</span> <span class="n">symb</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">Reals</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_domain1</span> <span class="o">=</span> <span class="n">solveset</span><span class="p">(</span><span class="n">expr</span> <span class="o">&lt;=</span> <span class="n">_end</span><span class="p">,</span> <span class="n">symb</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">Reals</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">intrvl</span><span class="o">.</span><span class="n">left_open</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">_start</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">:</span>
                <span class="n">_domain2</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">Reals</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_domain2</span> <span class="o">=</span> <span class="n">solveset</span><span class="p">(</span><span class="n">expr</span> <span class="o">&gt;</span> <span class="n">_start</span><span class="p">,</span> <span class="n">symb</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">Reals</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_domain2</span> <span class="o">=</span> <span class="n">solveset</span><span class="p">(</span><span class="n">expr</span> <span class="o">&gt;=</span> <span class="n">_start</span><span class="p">,</span> <span class="n">symb</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">Reals</span><span class="p">)</span>

        <span class="c1"># domain in the interval</span>
        <span class="n">expr_with_sing</span> <span class="o">=</span> <span class="n">Intersection</span><span class="p">(</span><span class="n">_domain1</span><span class="p">,</span> <span class="n">_domain2</span><span class="p">)</span>
        <span class="n">expr_domain</span> <span class="o">=</span> <span class="n">Complement</span><span class="p">(</span><span class="n">expr_with_sing</span><span class="p">,</span> <span class="n">_singularities</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expr_domain</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_sets</span><span class="p">,</span> <span class="n">Interval</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Union</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">elm_domain</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_sets</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">finite_set</span><span class="p">])</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_sets</span><span class="p">,</span> <span class="n">Union</span><span class="p">):</span>
        <span class="n">_domain</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span>
        <span class="k">for</span> <span class="n">intrvl</span> <span class="ow">in</span> <span class="n">_sets</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">_domain_element</span> <span class="o">=</span> <span class="n">Union</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">elm_domain</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">intrvl</span><span class="p">)</span>
                                      <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">finite_set</span><span class="p">])</span>
            <span class="n">_domain</span> <span class="o">=</span> <span class="n">Union</span><span class="p">(</span><span class="n">_domain</span><span class="p">,</span> <span class="n">_domain_element</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_domain</span></div>


<div class="viewcode-block" id="periodicity"><a class="viewcode-back" href="../../../../modelparameters.sympy.calculus.html#modelparameters.sympy.calculus.util.periodicity">[docs]</a><span class="k">def</span> <span class="nf">periodicity</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests the given function for periodicity in the given symbol.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ==========</span>

<span class="sd">    f : Expr.</span>
<span class="sd">        The concerned function.</span>
<span class="sd">    symbol : Symbol</span>
<span class="sd">        The variable for which the period is to be determined.</span>
<span class="sd">    check : Boolean</span>
<span class="sd">        The flag to verify whether the value being returned is a period or not.</span>

<span class="sd">    Returns</span>
<span class="sd">    =======</span>

<span class="sd">    period</span>
<span class="sd">        The period of the function is returned.</span>
<span class="sd">        `None` is returned when the function is aperiodic or has a complex period.</span>
<span class="sd">        The value of `0` is returned as the period of a constant function.</span>

<span class="sd">    Raises</span>
<span class="sd">    ======</span>

<span class="sd">    NotImplementedError</span>
<span class="sd">        The value of the period computed cannot be verified.</span>


<span class="sd">    Notes</span>
<span class="sd">    =====</span>

<span class="sd">    Currently, we do not support functions with a complex period.</span>
<span class="sd">    The period of functions having complex periodic values such</span>
<span class="sd">    as `exp`, `sinh` is evaluated to `None`.</span>

<span class="sd">    The value returned might not be the &quot;fundamental&quot; period of the given</span>
<span class="sd">    function i.e. it may not be the smallest periodic value of the function.</span>

<span class="sd">    The verification of the period through the `check` flag is not reliable</span>
<span class="sd">    due to internal simplification of the given expression. Hence, it is set</span>
<span class="sd">    to `False` by default.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>
<span class="sd">    &gt;&gt;&gt; from .. import Symbol, sin, cos, tan, exp</span>
<span class="sd">    &gt;&gt;&gt; from .util import periodicity</span>
<span class="sd">    &gt;&gt;&gt; x = Symbol(&#39;x&#39;)</span>
<span class="sd">    &gt;&gt;&gt; f = sin(x) + sin(2*x) + sin(3*x)</span>
<span class="sd">    &gt;&gt;&gt; periodicity(f, x)</span>
<span class="sd">    2*pi</span>
<span class="sd">    &gt;&gt;&gt; periodicity(sin(x)*cos(x), x)</span>
<span class="sd">    pi</span>
<span class="sd">    &gt;&gt;&gt; periodicity(exp(tan(2*x) - 1), x)</span>
<span class="sd">    pi/2</span>
<span class="sd">    &gt;&gt;&gt; periodicity(sin(4*x)**cos(2*x), x)</span>
<span class="sd">    pi</span>
<span class="sd">    &gt;&gt;&gt; periodicity(exp(x), x)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">simplify</span><span class="p">,</span> <span class="n">lcm_list</span>
    <span class="kn">from</span> <span class="nn">..functions.elementary.trigonometric</span> <span class="kn">import</span> <span class="n">TrigonometricFunction</span>
    <span class="kn">from</span> <span class="nn">..solvers.decompogen</span> <span class="kn">import</span> <span class="n">decompogen</span>

    <span class="n">orig_f</span> <span class="o">=</span> <span class="n">f</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">simplify</span><span class="p">(</span><span class="n">orig_f</span><span class="p">)</span>
    <span class="n">period</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">symbol</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">TrigonometricFunction</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">period</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_Pow</span><span class="p">:</span>
        <span class="n">base</span><span class="p">,</span> <span class="n">expo</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">args</span>
        <span class="n">base_has_sym</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
        <span class="n">expo_has_sym</span> <span class="o">=</span> <span class="n">expo</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">base_has_sym</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">expo_has_sym</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="n">periodicity</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">expo_has_sym</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">base_has_sym</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="n">periodicity</span><span class="p">(</span><span class="n">expo</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="n">_periodicity</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">f</span><span class="o">.</span><span class="n">is_Mul</span><span class="p">:</span>
        <span class="n">coeff</span><span class="p">,</span> <span class="n">g</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">as_independent</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">as_Add</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">TrigonometricFunction</span><span class="p">)</span> <span class="ow">or</span> <span class="n">coeff</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">S</span><span class="o">.</span><span class="n">One</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="n">periodicity</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="n">_periodicity</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">f</span><span class="o">.</span><span class="n">is_Add</span><span class="p">:</span>
        <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">as_independent</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">periodicity</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>

        <span class="n">period</span> <span class="o">=</span> <span class="n">_periodicity</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">period</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">..solvers.decompogen</span> <span class="kn">import</span> <span class="n">compogen</span>
        <span class="n">g_s</span> <span class="o">=</span> <span class="n">decompogen</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>
        <span class="n">num_of_gs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">g_s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">num_of_gs</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">g_s</span><span class="p">)):</span>
                <span class="n">start_index</span> <span class="o">=</span> <span class="n">num_of_gs</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">index</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">compogen</span><span class="p">(</span><span class="n">g_s</span><span class="p">[</span><span class="n">start_index</span><span class="p">:],</span> <span class="n">symbol</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">g</span> <span class="o">!=</span> <span class="n">orig_f</span> <span class="ow">and</span> <span class="n">g</span> <span class="o">!=</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># Fix for issue 12620</span>
                    <span class="n">period</span> <span class="o">=</span> <span class="n">periodicity</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">break</span>

    <span class="k">if</span> <span class="n">period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">check</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">orig_f</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">symbol</span> <span class="o">+</span> <span class="n">period</span><span class="p">)</span> <span class="o">==</span> <span class="n">orig_f</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">period</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">filldedent</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                    The period of the given function cannot be verified.</span>
<span class="s1">                    Set check=False to obtain the value.&#39;&#39;&#39;</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">period</span>

    <span class="k">return</span> <span class="kc">None</span></div>


<span class="k">def</span> <span class="nf">_periodicity</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">symbol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Helper for periodicity to find the period of a list of simpler</span>
<span class="sd">    functions. It uses the `lcim` method to find the least common period of</span>
<span class="sd">    all the functions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">periods</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">period</span> <span class="o">=</span> <span class="n">periodicity</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">period</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">period</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span><span class="p">:</span>
            <span class="n">periods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">period</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">periods</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">lcim</span><span class="p">(</span><span class="n">periods</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">periods</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


<div class="viewcode-block" id="lcim"><a class="viewcode-back" href="../../../../modelparameters.sympy.calculus.html#modelparameters.sympy.calculus.util.lcim">[docs]</a><span class="k">def</span> <span class="nf">lcim</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the least common integral multiple of a list of numbers.</span>

<span class="sd">    The numbers can be rational or irrational or a mixture of both.</span>
<span class="sd">    `None` is returned for incommensurable numbers.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>
<span class="sd">    &gt;&gt;&gt; from .. import S, pi</span>
<span class="sd">    &gt;&gt;&gt; from .util import lcim</span>
<span class="sd">    &gt;&gt;&gt; lcim([S(1)/2, S(3)/4, S(5)/6])</span>
<span class="sd">    15/2</span>
<span class="sd">    &gt;&gt;&gt; lcim([2*pi, 3*pi, pi, pi/2])</span>
<span class="sd">    6*pi</span>
<span class="sd">    &gt;&gt;&gt; lcim([S(1), 2*pi])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">num</span><span class="o">.</span><span class="n">is_irrational</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">):</span>
        <span class="n">factorized_nums</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">num</span><span class="p">:</span> <span class="n">num</span><span class="o">.</span><span class="n">factor</span><span class="p">(),</span> <span class="n">numbers</span><span class="p">))</span>
        <span class="n">factors_num</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">num</span><span class="p">:</span> <span class="n">num</span><span class="o">.</span><span class="n">as_coeff_Mul</span><span class="p">(),</span>
                <span class="n">factorized_nums</span><span class="p">))</span>
        <span class="n">term</span> <span class="o">=</span> <span class="n">factors_num</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">factor</span> <span class="o">==</span> <span class="n">term</span> <span class="k">for</span> <span class="n">coeff</span><span class="p">,</span> <span class="n">factor</span> <span class="ow">in</span> <span class="n">factors_num</span><span class="p">):</span>
            <span class="n">common_term</span> <span class="o">=</span> <span class="n">term</span>
            <span class="n">coeffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">coeff</span> <span class="k">for</span> <span class="n">coeff</span><span class="p">,</span> <span class="n">factor</span> <span class="ow">in</span> <span class="n">factors_num</span><span class="p">]</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">lcm_list</span><span class="p">(</span><span class="n">coeffs</span><span class="p">)</span> <span class="o">*</span> <span class="n">common_term</span>

    <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="n">num</span><span class="o">.</span><span class="n">is_rational</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">lcm_list</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="AccumulationBounds"><a class="viewcode-back" href="../../../../modelparameters.sympy.calculus.html#modelparameters.sympy.calculus.util.AccumulationBounds">[docs]</a><span class="k">class</span> <span class="nc">AccumulationBounds</span><span class="p">(</span><span class="n">AtomicExpr</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    # Note AccumulationBounds has an alias: AccumBounds</span>

<span class="sd">    AccumulationBounds represent an interval `[a, b]`, which is always closed</span>
<span class="sd">    at the ends. Here `a` and `b` can be any value from extended real numbers.</span>

<span class="sd">    The intended meaning of AccummulationBounds is to give an approximate</span>
<span class="sd">    location of the accumulation points of a real function at a limit point.</span>

<span class="sd">    Let `a` and `b` be reals such that a &lt;= b.</span>

<span class="sd">    `\langle a, b\rangle = \{x \in \mathbb{R} \mid a \le x \le b\}`</span>

<span class="sd">    `\langle -\infty, b\rangle = \{x \in \mathbb{R} \mid x \le b\} \cup \{-\infty, \infty\}`</span>

<span class="sd">    `\langle a, \infty \rangle = \{x \in \mathbb{R} \mid a \le x\} \cup \{-\infty, \infty\}`</span>

<span class="sd">    `\langle -\infty, \infty \rangle = \mathbb{R} \cup \{-\infty, \infty\}`</span>

<span class="sd">    `oo` and `-oo` are added to the second and third definition respectively,</span>
<span class="sd">    since if either `-oo` or `oo` is an argument, then the other one should</span>
<span class="sd">    be included (though not as an end point). This is forced, since we have,</span>
<span class="sd">    for example, `1/AccumBounds(0, 1) = AccumBounds(1, oo)`, and the limit at</span>
<span class="sd">    `0` is not one-sided. As x tends to `0-`, then `1/x -&gt; -oo`, so `-oo`</span>
<span class="sd">    should be interpreted as belonging to `AccumBounds(1, oo)` though it need</span>
<span class="sd">    not appear explicitly.</span>

<span class="sd">    In many cases it suffices to know that the limit set is bounded.</span>
<span class="sd">    However, in some other cases more exact information could be useful.</span>
<span class="sd">    For example, all accumulation values of cos(x) + 1 are non-negative.</span>
<span class="sd">    (AccumBounds(-1, 1) + 1 = AccumBounds(0, 2))</span>

<span class="sd">    A AccumulationBounds object is defined to be real AccumulationBounds,</span>
<span class="sd">    if its end points are finite reals.</span>

<span class="sd">    Let `X`, `Y` be real AccumulationBounds, then their sum, difference,</span>
<span class="sd">    product are defined to be the following sets:</span>

<span class="sd">    `X + Y = \{ x+y \mid x \in X \cap y \in Y\}`</span>

<span class="sd">    `X - Y = \{ x-y \mid x \in X \cap y \in Y\}`</span>

<span class="sd">    `X * Y = \{ x*y \mid x \in X \cap y \in Y\}`</span>

<span class="sd">    There is, however, no consensus on Interval division.</span>

<span class="sd">    `X / Y = \{ z \mid \exists x \in X, y \in Y \mid y \neq 0, z = x/y\}`</span>

<span class="sd">    Note: According to this definition the quotient of two AccumulationBounds</span>
<span class="sd">    may not be a AccumulationBounds object but rather a union of</span>
<span class="sd">    AccumulationBounds.</span>

<span class="sd">    Note</span>
<span class="sd">    ====</span>

<span class="sd">    The main focus in the interval arithmetic is on the simplest way to</span>
<span class="sd">    calculate upper and lower endpoints for the range of values of a</span>
<span class="sd">    function in one or more variables. These barriers are not necessarily</span>
<span class="sd">    the supremum or infimum, since the precise calculation of those values</span>
<span class="sd">    can be difficult or impossible.</span>

<span class="sd">    Examples</span>
<span class="sd">    ========</span>

<span class="sd">    &gt;&gt;&gt; from .. import AccumBounds, sin, exp, log, pi, E, S, oo</span>
<span class="sd">    &gt;&gt;&gt; from ..abc import x</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(0, 1) + AccumBounds(1, 2)</span>
<span class="sd">    &lt;1, 3&gt;</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(0, 1) - AccumBounds(0, 2)</span>
<span class="sd">    &lt;-2, 1&gt;</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(-2, 3)*AccumBounds(-1, 1)</span>
<span class="sd">    &lt;-3, 3&gt;</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(1, 2)*AccumBounds(3, 5)</span>
<span class="sd">    &lt;3, 10&gt;</span>

<span class="sd">    The exponentiation of AccumulationBounds is defined</span>
<span class="sd">    as follows:</span>

<span class="sd">    If 0 does not belong to `X` or `n &gt; 0` then</span>

<span class="sd">    `X^n = \{ x^n \mid x \in X\}`</span>

<span class="sd">    otherwise</span>

<span class="sd">    `X^n = \{ x^n \mid x \neq 0, x \in X\} \cup \{-\infty, \infty\}`</span>

<span class="sd">    Here for fractional `n`, the part of `X` resulting in a complex</span>
<span class="sd">    AccumulationBounds object is neglected.</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(-1, 4)**(S(1)/2)</span>
<span class="sd">    &lt;0, 2&gt;</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(1, 2)**2</span>
<span class="sd">    &lt;1, 4&gt;</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(-1, oo)**(-1)</span>
<span class="sd">    &lt;-oo, oo&gt;</span>

<span class="sd">    Note: `&lt;a, b&gt;^2` is not same as `&lt;a, b&gt;*&lt;a, b&gt;`</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(-1, 1)**2</span>
<span class="sd">    &lt;0, 1&gt;</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(1, 3) &lt; 4</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; AccumBounds(1, 3) &lt; -1</span>
<span class="sd">    False</span>

<span class="sd">    Some elementary functions can also take AccumulationBounds as input.</span>
<span class="sd">    A function `f` evaluated for some real AccumulationBounds `&lt;a, b&gt;`</span>
<span class="sd">    is defined as `f(\langle a, b\rangle) = \{ f(x) \mid a \le x \le b \}`</span>

<span class="sd">    &gt;&gt;&gt; sin(AccumBounds(pi/6, pi/3))</span>
<span class="sd">    &lt;1/2, sqrt(3)/2&gt;</span>

<span class="sd">    &gt;&gt;&gt; exp(AccumBounds(0, 1))</span>
<span class="sd">    &lt;1, E&gt;</span>

<span class="sd">    &gt;&gt;&gt; log(AccumBounds(1, E))</span>
<span class="sd">    &lt;0, 1&gt;</span>

<span class="sd">    Some symbol in an expression can be substituted for a AccumulationBounds</span>
<span class="sd">    object. But it doesn&#39;t necessarily evaluate the AccumulationBounds for</span>
<span class="sd">    that expression.</span>

<span class="sd">    Same expression can be evaluated to different values depending upon</span>
<span class="sd">    the form it is used for substituion. For example:</span>

<span class="sd">    &gt;&gt;&gt; (x**2 + 2*x + 1).subs(x, AccumBounds(-1, 1))</span>
<span class="sd">    &lt;-1, 4&gt;</span>

<span class="sd">    &gt;&gt;&gt; ((x + 1)**2).subs(x, AccumBounds(-1, 1))</span>
<span class="sd">    &lt;0, 4&gt;</span>

<span class="sd">    References</span>
<span class="sd">    ==========</span>

<span class="sd">    .. [1] https://en.wikipedia.org/wiki/Interval_arithmetic</span>

<span class="sd">    .. [2] http://fab.cba.mit.edu/classes/S62.12/docs/Hickey_interval.pdf</span>

<span class="sd">    Notes</span>
<span class="sd">    =====</span>

<span class="sd">    Do not use ``AccumulationBounds`` for floating point interval arithmetic</span>
<span class="sd">    calculations, use ``mpmath.iv`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">is_real</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>

        <span class="nb">min</span> <span class="o">=</span> <span class="n">_sympify</span><span class="p">(</span><span class="nb">min</span><span class="p">)</span>
        <span class="nb">max</span> <span class="o">=</span> <span class="n">_sympify</span><span class="p">(</span><span class="nb">max</span><span class="p">)</span>

        <span class="n">inftys</span> <span class="o">=</span> <span class="p">[</span><span class="n">S</span><span class="o">.</span><span class="n">Infinity</span><span class="p">,</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">]</span>
        <span class="c1"># Only allow real intervals (use symbols with &#39;is_real=True&#39;).</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">min</span><span class="o">.</span><span class="n">is_real</span> <span class="ow">or</span> <span class="nb">min</span> <span class="ow">in</span> <span class="n">inftys</span><span class="p">)</span> \
           <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">max</span><span class="o">.</span><span class="n">is_real</span> <span class="ow">or</span> <span class="nb">max</span> <span class="ow">in</span> <span class="n">inftys</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only real AccumulationBounds are supported&quot;</span><span class="p">)</span>

        <span class="c1"># Make sure that the created AccumBounds object will be valid.</span>
        <span class="k">if</span> <span class="nb">max</span><span class="o">.</span><span class="n">is_comparable</span> <span class="ow">and</span> <span class="nb">min</span><span class="o">.</span><span class="n">is_comparable</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">max</span> <span class="o">&lt;</span> <span class="nb">min</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Lower limit should be smaller than upper limit&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">max</span> <span class="o">==</span> <span class="nb">min</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">max</span>

        <span class="k">return</span> <span class="n">Basic</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span>

    <span class="c1"># setting the operation priority</span>
    <span class="n">_op_priority</span> <span class="o">=</span> <span class="mf">11.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the minimum possible value attained by AccumulationBounds</span>
<span class="sd">        object.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3).min</span>
<span class="sd">        1</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the maximum possible value attained by AccumulationBounds</span>
<span class="sd">        object.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3).max</span>
<span class="sd">        3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">delta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the difference of maximum possible value attained by</span>
<span class="sd">        AccumulationBounds object and minimum possible value attained</span>
<span class="sd">        by AccumulationBounds object.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3).delta</span>
<span class="sd">        2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the mean of maximum possible value attained by</span>
<span class="sd">        AccumulationBounds object and minimum possible value</span>
<span class="sd">        attained by AccumulationBounds object.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3).mid</span>
<span class="sd">        2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="nd">@_sympifyit</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="bp">NotImplemented</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_eval_power</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__pow__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="nd">@_sympifyit</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="bp">NotImplemented</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expr</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AccumBounds</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span>
                    <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">),</span>
                    <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span> <span class="ow">or</span> \
                    <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">is_real</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span><span class="p">),</span> <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__radd__</span> <span class="o">=</span> <span class="fm">__add__</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>

    <span class="nd">@_sympifyit</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="bp">NotImplemented</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expr</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AccumBounds</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span>
                    <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
                    <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span> <span class="ow">or</span> \
                    <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">is_real</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span>
                    <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="p">),</span>
                    <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="nd">@_sympifyit</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="bp">NotImplemented</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__neg__</span><span class="p">()</span> <span class="o">+</span> <span class="n">other</span>

    <span class="nd">@_sympifyit</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="bp">NotImplemented</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expr</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AccumBounds</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">Min</span><span class="p">(</span><span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">),</span>
                                       <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
                                       <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">),</span>
                                       <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">)),</span>
                                   <span class="n">Max</span><span class="p">(</span><span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">),</span>
                                       <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
                                       <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">),</span>
                                       <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_real</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">):</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span>
                        <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span><span class="p">),</span>
                        <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span>
                        <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="p">),</span>
                        <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Order</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">other</span>
            <span class="k">return</span> <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__rmul__</span> <span class="o">=</span> <span class="fm">__mul__</span>

    <span class="nd">@_sympifyit</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="bp">NotImplemented</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expr</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AccumBounds</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span> <span class="o">*</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span> <span class="ow">in</span> <span class="bp">self</span> <span class="ow">and</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_zero</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_zero</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                            <span class="c1"># the actual answer is a Union of AccumBounds,</span>
                            <span class="c1"># Union(AccumBounds(-oo, self.max/other.max),</span>
                            <span class="c1">#       AccumBounds(self.max/other.min, oo))</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_zero</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                            <span class="c1"># the actual answer is a Union of AccumBounds,</span>
                            <span class="c1"># Union(AccumBounds(-oo, self.min/other.min),</span>
                            <span class="c1">#       AccumBounds(self.min/other.max, oo))</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_zero</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">is_real</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span> <span class="ow">or</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">):</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">Min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">other</span><span class="p">),</span> <span class="n">Max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">Min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="p">),</span> <span class="n">Max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">/</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">/</span> <span class="n">other</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">/</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">/</span> <span class="n">other</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Mul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">other</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__truediv__</span> <span class="o">=</span> <span class="n">__div__</span>

    <span class="nd">@_sympifyit</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="bp">NotImplemented</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__rdiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_real</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span>
                <span class="k">if</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">==</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">Mul</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">),</span> <span class="n">oo</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">Mul</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">))</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">==</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">Mul</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">Mul</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">),</span> <span class="n">oo</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">Min</span><span class="p">(</span><span class="n">other</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
                                       <span class="n">Max</span><span class="p">(</span><span class="n">other</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">Mul</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="fm">__rtruediv__</span> <span class="o">=</span> <span class="n">__rdiv__</span>

    <span class="nd">@_sympifyit</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="bp">NotImplemented</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">..functions.elementary.miscellaneous</span> <span class="kn">import</span> <span class="n">real_root</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_nonnegative</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">FiniteSet</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="p">)</span><span class="o">**</span><span class="n">oo</span>

            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_real</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">is_number</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">S</span><span class="o">.</span><span class="n">One</span>

                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_Integer</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_positive</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span>
                            <span class="n">Min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">**</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">**</span> <span class="n">other</span><span class="p">),</span>
                            <span class="n">Max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">**</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">**</span> <span class="n">other</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span>
                            <span class="n">Min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">**</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">**</span> <span class="n">other</span><span class="p">),</span>
                            <span class="n">Max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">**</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">**</span> <span class="n">other</span><span class="p">))</span>

                    <span class="k">if</span> <span class="n">other</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">**</span><span class="n">other</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">**</span><span class="n">other</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span>
                            <span class="n">S</span><span class="o">.</span><span class="n">Zero</span><span class="p">,</span> <span class="n">Max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">**</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">**</span><span class="n">other</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">**</span><span class="n">other</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_zero</span><span class="p">:</span>
                                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">**</span><span class="n">other</span><span class="p">)</span>
                            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="o">-</span><span class="n">oo</span><span class="p">,</span> <span class="n">oo</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">**</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">**</span><span class="n">other</span><span class="p">)</span>

                <span class="n">num</span><span class="p">,</span> <span class="n">den</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">as_numer_denom</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="n">S</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">den</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">S</span><span class="o">.</span><span class="n">Zero</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
                                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">real_root</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">den</span><span class="p">))</span>
                    <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">real_root</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">den</span><span class="p">),</span>
                                       <span class="n">real_root</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">den</span><span class="p">))</span>
                <span class="n">num_pow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">**</span><span class="n">num</span>
                <span class="k">return</span> <span class="n">num_pow</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">den</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Pow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__neg__</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">is_negative</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">Zero</span><span class="p">,</span> <span class="n">Max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if range of values attained by `self` AccumulationBounds</span>
<span class="sd">        object is less than the range of values attained by `other`, where</span>
<span class="sd">        other may be any value of type AccumulationBounds object or extended</span>
<span class="sd">        real number value, False is returned if `other` satisfies the same</span>
<span class="sd">        property,None if the values attained by AccumulationBounds object</span>
<span class="sd">        intersect.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds, oo</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3) &lt; AccumBounds(4, oo)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 4) &lt; AccumBounds(3, 4)</span>

<span class="sd">        &gt;&gt;&gt; AccumBounds(1, oo) &lt; -1</span>
<span class="sd">        False</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="n">_sympify</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AccumBounds</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">is_real</span> <span class="ow">or</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span> <span class="ow">or</span>
               <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid comparison of </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">other</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_comparable</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if range of values attained by `self` AccumulationBounds</span>
<span class="sd">        object is less than or equal to the range of values attained by</span>
<span class="sd">        `other`, where other may be any value of type AccumulationBounds</span>
<span class="sd">        object or extended real number value, AccumulationBounds object,</span>
<span class="sd">        False is returned if `other` satisfies the same property, None if</span>
<span class="sd">        the values attained by AccumulationBounds object intersect.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds, oo</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3) &lt;= AccumBounds(4, oo)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 4) &lt;= AccumBounds(3, 4)</span>

<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3) &lt;= 3</span>
<span class="sd">        True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="n">_sympify</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AccumBounds</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">is_real</span> <span class="ow">or</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span> <span class="ow">or</span>
               <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid comparison of </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">other</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_comparable</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if range of values attained by `self` AccumulationBounds</span>
<span class="sd">        object is greater than the range of values attained by `other`,</span>
<span class="sd">        where other may be any value of type AccumulationBounds object or</span>
<span class="sd">        extended real number value, False is returned if `other` satisfies</span>
<span class="sd">        the same property, None if the values attained by AccumulationBounds</span>
<span class="sd">        object intersect.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds, oo</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3) &gt; AccumBounds(4, oo)</span>
<span class="sd">        False</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 4) &gt; AccumBounds(3, 4)</span>

<span class="sd">        &gt;&gt;&gt; AccumBounds(1, oo) &gt; -1</span>
<span class="sd">        True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="n">_sympify</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AccumBounds</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">is_real</span> <span class="ow">or</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span> <span class="ow">or</span>
               <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid comparison of </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">other</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_comparable</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if range of values attained by `self` AccumulationBounds</span>
<span class="sd">        object is less that the range of values attained by `other`, where</span>
<span class="sd">        other may be any value of type AccumulationBounds object or extended</span>
<span class="sd">        real number value, False is returned if `other` satisfies the same</span>
<span class="sd">        property, None if the values attained by AccumulationBounds object</span>
<span class="sd">        intersect.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds, oo</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3) &gt;= AccumBounds(4, oo)</span>
<span class="sd">        False</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 4) &gt;= AccumBounds(3, 4)</span>

<span class="sd">        &gt;&gt;&gt; AccumBounds(1, oo) &gt;= 1</span>
<span class="sd">        True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="n">_sympify</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AccumBounds</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">is_real</span> <span class="ow">or</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span> <span class="ow">or</span>
               <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid comparison of </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">other</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_comparable</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if other is contained in self, where other</span>
<span class="sd">        belongs to extended real numbers, False if not contained,</span>
<span class="sd">        otherwise TypeError is raised.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds, oo</span>
<span class="sd">        &gt;&gt;&gt; 1 in AccumBounds(-1, 3)</span>
<span class="sd">        True</span>

<span class="sd">        -oo and oo go together as limits (in AccumulationBounds).</span>

<span class="sd">        &gt;&gt;&gt; -oo in AccumBounds(1, oo)</span>
<span class="sd">        True</span>

<span class="sd">        &gt;&gt;&gt; oo in AccumBounds(-oo, 0)</span>
<span class="sd">        True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="n">_sympify</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">is_Symbol</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">is_number</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Input of type real symbol or Number expected&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span> <span class="ow">or</span> <span class="n">other</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">NegativeInfinity</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">Infinity</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="n">And</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&lt;=</span> <span class="n">other</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="p">)</span>

<div class="viewcode-block" id="AccumulationBounds.intersection"><a class="viewcode-back" href="../../../../modelparameters.sympy.calculus.html#modelparameters.sympy.calculus.util.AccumulationBounds.intersection">[docs]</a>    <span class="k">def</span> <span class="nf">intersection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersection of &#39;self&#39; and &#39;other&#39;.</span>
<span class="sd">        Here other can be an instance of FiniteSet or AccumulationBounds.</span>

<span class="sd">        Examples</span>
<span class="sd">        ========</span>

<span class="sd">        &gt;&gt;&gt; from .. import AccumBounds, FiniteSet</span>
<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3).intersection(AccumBounds(2, 4))</span>
<span class="sd">        &lt;2, 3&gt;</span>

<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 3).intersection(AccumBounds(4, 6))</span>
<span class="sd">        EmptySet()</span>

<span class="sd">        &gt;&gt;&gt; AccumBounds(1, 4).intersection(FiniteSet(1, 2, 5))</span>
<span class="sd">        {1, 2}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">AccumBounds</span><span class="p">,</span> <span class="n">FiniteSet</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Input must be AccumulationBounds or FiniteSet object&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">FiniteSet</span><span class="p">):</span>
            <span class="n">fin_set</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="n">fin_set</span> <span class="o">=</span> <span class="n">fin_set</span> <span class="o">+</span> <span class="n">FiniteSet</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">fin_set</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">S</span><span class="o">.</span><span class="n">EmptySet</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">other</span>

        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="AccumulationBounds.union"><a class="viewcode-back" href="../../../../modelparameters.sympy.calculus.html#modelparameters.sympy.calculus.util.AccumulationBounds.union">[docs]</a>    <span class="k">def</span> <span class="nf">union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="c1"># TODO : Devise a better method for Union of AccumBounds</span>
        <span class="c1"># this method is not actually correct and</span>
        <span class="c1"># can be made better</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AccumBounds</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Input must be AccumulationBounds or FiniteSet object&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">Max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">min</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">AccumBounds</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">Max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">max</span><span class="p">))</span></div></div>


<span class="c1"># setting an alias for AccumulationBounds</span>
<span class="n">AccumBounds</span> <span class="o">=</span> <span class="n">AccumulationBounds</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">modelparameters 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">modelparameters.sympy.calculus.util</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Johan Hake, Henrik Finsberg.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.3.
    </div>
  </body>
</html>